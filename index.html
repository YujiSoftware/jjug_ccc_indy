<!DOCTYPE html>
<html>
  <head>
    <title>Title</title>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/>
    <style type="text/css">
    @import url(https://fonts.googleapis.com/css?family=Yanone+Kaffeesatz);
    @import url(https://fonts.googleapis.com/css?family=Droid+Serif:400,700,400italic);
    @import url(https://fonts.googleapis.com/css?family=Ubuntu+Mono:400,700,400italic);
    @import url('https://fonts.googleapis.com/css2?family=Noto+Sans+JP:wght@100..900&display=swap');

    body { 
      font-family: 'Noto Sans JP", sans-serif';
    }
    .remark-code, .remark-inline-code {
      font-family: 'Ubuntu Mono';
    }
    .remark-inline-code { 
      font-style: italic;
    }

    .remark-slide-content {
      font-size: 40px; /* 20px */
      padding: 0.5em 2em;
    }
    .remark-slide-content > * {
      margin: 0.25em 0;
    }
    .remark-slide-number {
      display: none; /* ãƒšãƒ¼ã‚¸ç•ªå· */
    }
    .remark-slide-content h1 {
      font-size:60px; /* 55px */
    }
    .remark-slide-content h2 {
      font-size:50px; /* 45px */
    }
    .remark-slide-content h3 {
      font-size:40px; /* 35px */
    }
    .remark-slide-content .highlight {
      color: darkred;
      font-weight: bold;
    }
    .remark-code {
      font-size:36px; /* 18px */
      background-color: #EFEFEF;
    }
    
    .move {
        animation: anim 0.5s ease-out;
    }
    @keyframes anim {
        0% {
            transform: translateX(300px);
        }
        100% {
            transform: translateX(0px);
        }
    }
    </style>
  </head>
  <body>
    <textarea id="source">

class: center, middle

# Title

---

# Agenda

1. One
2. Two
3. Three
--

4. Four
5. Five
6. Six

---

# æ—¥æœ¬èªãƒ†ã‚¹ãƒˆï¼ˆã“ã“ã‚ãƒ»å¤ç›®æ¼±çŸ³/è‘—ï¼‰

* ç§ã¯ãã®äººã‚’å¸¸ã«å…ˆç”Ÿã¨å‘¼ã‚“ã§ã„ãŸã€‚
* ã ã‹ã‚‰ã“ã“ã§ã‚‚ãŸã å…ˆç”Ÿã¨æ›¸ãã ã‘ã§æœ¬åã¯æ‰“ã¡æ˜ã‘ãªã„ã€‚
* ã“ã‚Œã¯ä¸–é–“ã‚’æ†šã‹ã‚‹é æ…®ã¨ã„ã†ã‚ˆã‚Šã‚‚ã€ãã®æ–¹ãŒç§ã«ã¨ã£ã¦è‡ªç„¶ã ã‹ã‚‰ã§ã‚ã‚‹ã€‚
* ç§ã¯ãã®äººã®è¨˜æ†¶ã‚’å‘¼ã³èµ·ã™ã”ã¨ã«ã€ã™ãã€Œå…ˆç”Ÿã€ã¨ã„ã„ãŸããªã‚‹ã€‚
* ç­†ã‚’åŸ·ã£ã¦ã‚‚å¿ƒæŒã¯åŒã˜äº‹ã§ã‚ã‚‹ã€‚
* ã‚ˆãã‚ˆãã—ã„é ­æ–‡å­—ãªã©ã¯ã¨ã¦ã‚‚ä½¿ã†æ°—ã«ãªã‚‰ãªã„ã€‚

---

# Transform

Java ã®ã©ã“ã§ InvokeDynamic ãŒä½¿ã‚ã‚Œã¦ã„ã‚‹ï¼Ÿï¼ˆJava22æ™‚ç‚¹ï¼‰

--

.move[
* Lambda
* Pattern Matching for switch
* Recod class
  * toString, hashCode, equals ãƒ¡ã‚½ãƒƒãƒ‰ã®å®Ÿè£…
* String Concatenationï¼ˆJava 9ã€œï¼‰ <!-- https://openjdk.org/jeps/280 -->
  * +æ¼”ç®—å­ã«ã‚ˆã‚‹æ–‡å­—åˆ—çµåˆ
* Refrection APIï¼ˆJava 18 ã€œï¼‰<!-- https://openjdk.org/jeps/416 -->
]

---

# Code

ã‚½ãƒ¼ã‚¹ã‚³ãƒ¼ãƒ‰ã®ã‚µãƒ³ãƒ—ãƒ«
```java
public boolean isOdd(java.util.List<java.lang.Integer>);
  0: aload_1
  1: invokeinterface #7,  1
            // InterfaceMethod java/util/List.stream:()Ljava/util/stream/Stream;
* 6: invokedynamic #13,  0
            // InvokeDynamic #0:test:()Ljava/util/function/Predicate;
 11: invokeinterface #17,  2
            // InterfaceMethod java/util/stream/Stream.allMatch:(Ljava/util/function/Predicate;)Z
 16: ireturn
```

---

class: center, middle

# invokeDynamic ã®åŸºæœ¬çš„ãªå‹•ä½œ

---

# ãƒ¡ã‚½ãƒƒãƒ‰ã‚³ãƒ¼ãƒ«ç”¨ã®ãƒã‚¤ãƒˆã‚³ãƒ¼ãƒ‰

* invoke**virtual**
* invoke**static**
* invoke**interface**
* invoke**special**
* invoke**dynamic** â† ğŸ†•

<br>
ä½•ãŒé•ã†ï¼Ÿ

---

# invoke**virtual** ã®å ´åˆ

æŒ‡å®šã•ã‚ŒãŸ**ã‚¯ãƒ©ã‚¹ã¾ãŸã¯ãã®è¦ªã‚¯ãƒ©ã‚¹**ã‹ã‚‰ã€  
æŒ‡å®šã•ã‚ŒãŸãƒ¡ã‚½ãƒƒãƒ‰ã‚’æ¢ã™

<br>
```java
  foo.do(1, 2);
    â†“
  invokevirtual #10
      // #10 Method Foo.do:(int, int)V
```

---

# invoke**static** ã®å ´åˆ

æŒ‡å®šã•ã‚ŒãŸã‚¯ãƒ©ã‚¹ã‹ã‚‰ã€  
æŒ‡å®šã•ã‚ŒãŸå®šç¾©ã®**static ãƒ¡ã‚½ãƒƒãƒ‰**ã‚’æ¢ã™

<br>
```java
  Foo.do(1, 2);
    â†“
  invokestatic #10
      // #10 Method Foo.do:(int, int)V
```

---

# invoke**interface** ã®å ´åˆ

æŒ‡å®šã•ã‚ŒãŸã‚¤ãƒ³ã‚¿ãƒ•ã‚§ãƒ¼ã‚¹ã®**ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹**ã‹ã‚‰ã€  
æŒ‡å®šã•ã‚ŒãŸå®šç¾©ã®ãƒ¡ã‚½ãƒƒãƒ‰ã‚’æ¢ã™

<br>
```java
  foo.do(1, 2);
    â†“
  invokeinterface #10
      // #10 InterfaceMethod Foo.do:(int, int)V
```

---

# invoke**special** ã®å ´åˆ

æŒ‡å®šã•ã‚ŒãŸã‚¯ãƒ©ã‚¹ã‹ã‚‰ã€  
æŒ‡å®šã•ã‚ŒãŸå®šç¾©ã®ãƒ¡ã‚½ãƒƒãƒ‰ã‚’æ¢ã™  
ï¼ˆã‚³ãƒ³ã‚¹ãƒˆãƒ©ã‚¯ã‚¿ã‚„è¦ªã‚¯ãƒ©ã‚¹ã®ãƒ¡ã‚½ãƒƒãƒ‰ãªã©ï¼‰

<br>
```java
  super.do(1, 2);
    â†“
  invokespecial #10
      // #10 Method Foo.do:(int, int)V
```

---

# invoke**dynamic** ã®å ´åˆ

--

```java
  foo.do(1, 2);
    â†“
  invokedynamic #10, 0
      // InvokeDynamic #0:make:(Object, Object)V;

BootstrapMethods:
  0: #38 REF_invokeStatic FooFactory.make:(
      Ljava/lang/invoke/MethodHandles$Lookup;
      Ljava/lang/String;
      Ljava/lang/invoke/MethodType;
      Ljava/lang/String;
    )Ljava/lang/invoke/CallSite;
  Method arguments:
    #36 do
```

---

class: center, middle

ã©ã†ã„ã†ã“ã¨ï¼Ÿ

---

# invoke**dynamic** ã®å ´åˆ

**æŒ‡å®šã—ãŸ Bootstrap ãƒ¡ã‚½ãƒƒãƒ‰**ãŒã€  
æŒ‡å®šã•ã‚ŒãŸå®šç¾©ã®ãƒ¡ã‚½ãƒƒãƒ‰ã‚’æ¢ã™

<br>
```java
  foo.do(1, 2);
    â†“
  invokedynamic #10, 0
      // InvokeDynamic #0:make:(Object, Object)V;
           â†“
BootstrapMethods:
  0: #38 REF_invokeStatic FooFactory.make:
```

---

# Bootstrap ãƒ¡ã‚½ãƒƒãƒ‰ã®å½¹å‰²

<span style="text-decoration: underline">ä¸ãˆã‚‰ã‚ŒãŸæƒ…å ±</span>ã‚’ã‚‚ã¨ã«ã€å®Ÿè¡Œã™ã‚‹ãƒ¡ã‚½ãƒƒãƒ‰ã‚’è¿”ã™  
<span style="margin-left: 3em">â†“</span>
* å¼•æ•°ã®æ•°ã¨å‹
* æˆ»ã‚Šå€¤ã®å‹
* ãƒ¡ã‚½ãƒƒãƒ‰å–å¾—ç”¨ã®ã‚¯ãƒ©ã‚¹
* è¿½åŠ æƒ…å ±ï¼ˆãƒ¡ã‚½ãƒƒãƒ‰åãªã©ï¼‰

    </textarea>
    <script src="https://remarkjs.com/downloads/remark-latest.min.js" type="text/javascript">
    </script>
    <script type="text/javascript">
      var slideshow = remark.create({
        highlightLines: true,
        highlightStyle: "googlecode",
        ratio: '16:9'
      });
    </script>
  </body>
</html>
